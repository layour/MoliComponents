<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>summer</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
   	<link rel="stylesheet" href="../../../../css/iuapmobile.um.css" charset="utf-8"/>   
    <link rel="stylesheet" href="../css/department.css">
  </head>
<body>
    <div id="wrap" class="um-frame">	
         
        <div class="main um-content"  >
         	<div class="addressList">
					<!-- <div>
							<div class="title border">
								<i class="iconfont icon-shangjiantou"></i>
								用户分组<em>（3）</em>
							</div>
							<ul style="display:block">
								<li class="border">
									<div><img src="image/contacts/m-a.png" alt="" />
									</div>
									<p>
										小胖
									</p>
								</li>				
							</ul>
						</div> 
					</div> -->
			</div>
        </div>
    </div>
    
</body>
<script id="domTemp" type="text/x-dot-template">
	<ul>
		{{for(var i=0;i<it.length;i++){ }}
			<li onclick="openWin('{{=it[i].yhtId}}')" class="border" data-userid=""  >
			<div><img src="../image/contacts/m-a.png" alt="" />
			</div>
			<p>{{= it[i].userName}}</p>
			</li>
		{{}}}
	</ul>
</script>
<script type="text/javascript" src="../js/public/jquery.min.js"></script>
<script type="text/javascript" src="../js/public/summer.js"></script>
<script type="text/javascript" src="../js/public/font.js"></script>
<script type="text/javascript" src="../js/public/doT.min.js"></script>
<script type="text/javascript" src="../js/public/summerCommon.js"></script>
<script>
var testData=[
		{
			"avatar":"",
			"email":"zhenglq@169.com",
			"id":2,
			"mobile":"",
			"name":"",
			"staffNo":"",
			"userName":"王五",
			"yhtId":"f23f7bf1-cab6-4791-b5ec-c666aca4d54c"
		},
		{
			"avatar":"",
			"email":"zhenglq@189.com",
			"id":4,
			"mobile":"",
			"name":"",
			"staffNo":"",
			"userName":"赵强",
			"yhtId":"4821d875-a783-4b29-9307-7c9dac984656"
		},
		{
			"avatar":"",
			"email":"zhenglq@yonyou.com",
			"id":5,
			"mobile":"13810876954",
			"name":"",
			"staffNo":"",
			"userName":"张三",
			"yhtId":"d3b87a3c-bdf5-4302-a7c3-cb669c1ad3e5"
		},
		{
			"avatar":"",
			"email":"zhenglq@yonyou.com",
			"id":5,
			"mobile":"13810876954",
			"name":"",
			"staffNo":"",
			"userName":"周飞",
			"yhtId":"d3b87a3c-bdf5-4302-a7c3-cb669c1ad3e5"
		},
		{
			"avatar":"",
			"email":"zhenglq@179.com",
			"id":3,
			"mobile":"",
			"name":"",
			"staffNo":"",
			"userName":"徐静",
			"yhtId":"0e745680-de74-4d8f-977c-5dc2c711cc09"
		}
	],
   
summerready = function(){
	//$summer.fixStatusBar($summer.byId('header'));
	getData();
	 summer.window.setRefreshHeaderInfo({
                visible: true,
                bgColor: '#ffffff',
                textColor: '#4d4d4d',
                textDown: '下拉刷新...',
                textUp: '松开刷新...',                                                                                                                                                                                     textDo : '正在刷新数据...',                                                                                                                                                                                     showTime: true
    }, function (ret, err) {
                //从服务器加载数据，加载完成后调用api.refreshHeaderLoadDone()方法恢复组件到默认状态
               getData();
			  summer.refreshFooterLoadDone();
 	});
 	    /*上拉加载*/
    summer.setRefreshFooterInfo({
        visible: true,
        bgColor: '#ffffff',
        textColor: '#4d4d4d',
        textDown: '上拉加载更多...',
        textUp: '松开刷新...',
        showTime: true,
    }, function (ret, err) {
        	 
            summer.refreshFooterLoadDone();
    })
	 
};
function openWin(type){
	summer.openWin({
		id : "employee",
		url : "summer-component-contacts/www/html/employee.html",
		statusBarStyle:"light",
		pageParam :{
			id:type,
		}
	});
};
function getData(){
var param={
	 pageNum:10,
	 hasSelf:1 
}
	ajaxRequest({
        type: 'get',
        url: '/userlink/getMyCorpUser',
        param: param
    }, function (res) {
        var dataText = doT.template($("#domTemp").text());
		$(".addressList").html(dataText(res.data.content));
    }, function (err) {
        alert("获取失败"+JSON.stringify(err));
    })
}
</script>
</html>